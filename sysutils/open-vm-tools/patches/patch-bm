$NetBSD: patch-bm,v 1.1 2008/08/31 06:36:49 scottr Exp $

--- lib/wiper/wiperPosix.c.orig	2015-06-17 16:14:30.000000000 +0000
+++ lib/wiper/wiperPosix.c
@@ -23,7 +23,7 @@
  *
  */
 
-#if !defined(__linux__) && !defined(sun) && !defined(__FreeBSD__) && !defined(__APPLE__)
+#if !defined(__linux__) && !defined(sun) && !defined(__FreeBSD__) && !defined(__APPLE__) && !defined(__NetBSD__)
 #error This file should not be compiled on this platform.
 #endif
 
@@ -31,7 +31,7 @@
 #include <sys/stat.h>
 #if defined(__linux__) || defined(sun)
 # include <sys/vfs.h>
-#elif defined(__FreeBSD__) || defined(__APPLE__)
+#elif defined(__FreeBSD__) || defined(__APPLE__) || defined(__NetBSD__)
 # include <sys/param.h>
 # include <sys/ucred.h>
 # include <sys/mount.h>
@@ -72,7 +72,7 @@
 
 #if defined(sun) || defined(__linux__)
 # define PROCFS "proc"
-#elif defined(__FreeBSD__) || defined(__APPLE__)
+#elif defined(__FreeBSD__) || defined(__APPLE__) || defined(__NetBSD__)
 # define PROCFS "procfs"
 #endif
 
@@ -328,7 +328,7 @@ WiperIsDiskDevice(MNTINFO *mnt,         
    return FALSE;
 }
 
-#elif defined(__FreeBSD__) /* } FreeBSD { */
+#elif defined(__FreeBSD__) || defined(__NetBSD__) /* } FreeBSD { */
 
 static Bool
 WiperIsDiskDevice(MNTINFO *mnt,         // IN: file system being considered
@@ -342,7 +342,7 @@ WiperIsDiskDevice(MNTINFO *mnt,         
     * function, as a whole, does not even apply to OS X, so this caveat is
     * only minor.
     */
-#if __FreeBSD_version < 500000
+#if defined(__NetBSD__) || __FreeBSD_version < 500000
    /*
     * Before FreeBSD 5, device nodes had static major/minor numbers.
     * (FreeBSD 5 included devfs which got rid of this concept.)  So
@@ -571,7 +571,7 @@ WiperSinglePartition_GetSpace(const Wipe
                               uint64 *free,       // OUT
                               uint64 *total)      // OUT
 {
-#ifdef sun
+#if defined(sun) || defined(__NetBSD__)
    struct statvfs statfsbuf;
 #else
    struct statfs statfsbuf;
